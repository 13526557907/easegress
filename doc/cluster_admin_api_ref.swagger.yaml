swagger: '2.0'
info:
  title: Ease Gateway Cluster Administration API
  description: Ease Gateway supports cluster APIs on administration panel.
  version: "1.0"
schemes:
  - http
  - https
basePath: /cluster/admin/v1
produces:
  - application/json
paths:
  /{group}/plugin-types:
    get:
      summary: Retrieves Plugin Type in a Group
      description: |
        The Plugin Type retrieve endpoints in the group return all available
        plugin types the group supports currently. Which can be used to create
        a plugin instance with a special configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginTypesRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginTypesRetrieveClusterRequest'
          required: true
          description: Timeout and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster and plugin type retrieve request parameter.
            Including, invalid group name or timeout is less than 10s.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin types response.
          schema:
            $ref: '#/definitions/ResultRetrievePluginTypes'
  /{group}/pipeline-types:
    get:
      summary: Retrieves Pipeline Type in a Group
      description: |
        The Pipeline Type retrieve endpoints in the group return all available
        pipeline types the group supports currently. Which can be used to create
        a pipeline instance with a special configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelineTypesRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelineTypesRetrieveClusterRequest'
          required: true
          description: Timeout and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster and pipeline type retrieve request parameter.
            Including, invalid group name or timeout is less than 10s.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline types response.
          schema:
            $ref: '#/definitions/ResultRetrievePipelineTypes'
  /{group}/plugins:
    post:
      summary: Creates Plugin Instance in a Group
      description: |
        The Plugin Instance creation endpoints in the group create a special
        plugin instance according to the plugin type and the configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginCreationClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginCreationClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
            And plugin type and configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and plugin instance creation request parameter.
            Including, invalid group name or timeout is less than 10s or invalid
            operation sequence, invalid plugin type or invalid configuration
            according to the plugin instance is being created.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: |
            Plugin instance with the given name request parameter provided is
            already existing, or the operation sequence is out-of-date.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin instance is created successfully in the group.
        202:
          description: Plugin instance is created partially in the group.
    get:
      summary: Retrieves Plugin Instance in a Group
      description: |
        The Plugin Instances retrieve endpoints in the group return all existing
        plugin instnaces the group has currently.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginsRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginsRetrieveClusterRequest'
          required: true
          description: |
            Timeout and flag consistent configuration.
            And plugin instance retrieve conditions.
      responses:
        400:
          description: |
            Invalid cluster operation and plugin instance retrieve request parameter.
            Including, invalid group name or timeout is less than 10s,
            invalid plugin type or invalid name pattern.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin instances response.
          schema:
            $ref: '#/definitions/ResultRetrievePlugins'
    put:
      summary: Updates Plugin Instance in a Group
      description: |
        The Plugin Instance update endpoints in the group update a special
        plugin instance according to the plugin type and the configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginUpdateClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginUpdateClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
            And plugin type and configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and plugin instance update request parameter.
            Including, invalid group name or timeout is less than 10s or invalid
            operation sequence, invalid plugin type or invalid configuration
            according to the plugin instance is being updated.
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Plugin instnace not found by given name in the group.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: |
            The operation sequence is out-of-date.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin instance is updated successfully in the group.
        202:
          description: Plugin instance is updated partially in the group.
  /{group}/plugins/{pluginName}:
    get:
      summary: Retrieves Plugin Instance in a Group
      description: |
        The Plugin Instance retrieve endpoints in the group return an existing
        plugin instnaces the group has currently by plugin name.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginName
          in: path
          description: Plugin instance name to query.
          required: true
          type: string
        - name: pluginRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginRetrieveClusterRequest'
          required: true
          description: |
            Timeout and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and plugin instance retrieve request parameter.
            Including, invalid group name or invalid plugin name or timeout is
            less than 10s,
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Plugin instnace not found by given name.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin instances response.
          schema:
            $ref: '#/definitions/ResultRetrievePlugin'
    delete:
      summary: Deletes Plugin Instance in a Group
      description: |
        The Plugin Instance deletion endpoints in the group delete an existing
        plugin instnace the group has currently by plugin name.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pluginName
          in: path
          description: Plugin instance name to delete.
          required: true
          type: string
        - name: pluginDeletionClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PluginDeletionClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and plugin instance deletion request parameter.
            Including, invalid group name or invalid plugin name or timeout is less
            than 10s or invalid operation sequence.
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Plugin instnace not found by given name.
          schema:
            $ref: '#/definitions/Error'
        406:
          description: |
            Plugin instnace could not be deleted by given name since it is used by
            one or more pipelines.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Plugin instance is deleted successfully in the group.
        202:
          description: Plugin instance is deleted partially in the group.
  /{group}/pipelines:
    post:
      summary: Creates Pipeline Instance in a Group
      description: |
        The Pipeline Instance creation endpoints in the group create a special
        pipeline instance according to the pipeline type and the configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelineCreationClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelineCreationClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
            And pipeline type and configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and pipeline instance creation request parameter.
            Including, invalid group name or timeout is less than 10s or invalid
            operation sequence, invalid pipeline type or invalid configuration
            according to the pipeline instance is being created, or one or more
            plugin instances in the pipeline are not found.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: |
            Pipeline instance with the given name request parameter provided is
            already existing, or the operation sequence is out-of-date.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline instance is created successfully in the group.
        202:
          description: Pipeline instance is created partially in the group.
    get:
      summary: Retrieves Pipeline Instance in a Group
      description: |
        The Pipeline Instances retrieve endpoints in the group return all existing
        pipeline instnaces the group has currently.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelinesRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelinesRetrieveClusterRequest'
          required: true
          description: |
            Timeout and flag consistent configuration.
            And pipeline instance retrieve conditions.
      responses:
        400:
          description: |
            Invalid cluster operation and pipeline instance retrieve request parameter.
            Including, invalid group name or timeout is less than 10s,
            invalid pipeline type or invalid name pattern.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline instances response.
          schema:
            $ref: '#/definitions/ResultRetrievePipelines'
    put:
      summary: Updates Pipeline Instance in a Group
      description: |
        The Pipeline Instance update endpoints in the group update a special
        pipeline instance according to the pipeline type and the configuration.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelineUpdateClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelineUpdateClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
            And pipeline type and configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and pipeline instance update request parameter.
            Including, invalid group name or timeout is less than 10s or invalid
            operation sequence, invalid pipeline type or invalid configuration
            according to the pipeline instance is being updated, or one or more
            plugin instances in the pipeline are not found.
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Pipeline instnace not found by given name in the group.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: |
            The operation sequence is out-of-date.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline instance is updated successfully in the group.
        202:
          description: Pipeline instance is updated partially in the group.
  /{group}/pipelines/{pipelineName}:
    get:
      summary: Retrieves Pipeline Instance in a Group
      description: |
        The Pipeline Instance retrieve endpoints in the group return an existing
        pipeline instnaces the group has currently by pipeline name.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelineName
          in: path
          description: Pipeline instance name to query.
          required: true
          type: string
        - name: pipelineRetrieveClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelineRetrieveClusterRequest'
          required: true
          description: |
            Timeout and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and pipeline instance retrieve request parameter.
            Including, invalid group name or invalid pipeline name or timeout is
            less than 10s,
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Pipeline instnace not found by given name.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        409:
          description: The retrieve results are inconsistent from members of the group.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline instances response.
          schema:
            $ref: '#/definitions/ResultRetrievePipeline'
    delete:
      summary: Deletes Pipeline Instance in a Group
      description: |
        The Pipeline Instance deletion endpoints in the group delete an existing
        pipeline instnace the group has currently by pipeline name.
      parameters:
        - name: group
          in: path
          required: true
          type: string
        - name: pipelineName
          in: path
          description: Pipeline instance name to delete.
          required: true
          type: string
        - name: pipelineDeletionClusterRequest
          in: body
          schema:
            $ref: '#/definitions/PipelineDeletionClusterRequest'
          required: true
          description: |
            Timeout, operation sequence and flag consistent configuration.
      responses:
        400:
          description: |
            Invalid cluster operation and pipeline instance deletion request parameter.
            Including, invalid group name or invalid pipeline name or timeout is less
            than 10s or invalid operation sequence.
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Pipeline instnace not found by given name.
          schema:
            $ref: '#/definitions/Error'
        406:
          description: |
            Pipeline instnace could not be deleted by given name since it is used by
            one or more pipelines.
          schema:
            $ref: '#/definitions/Error'
        408:
          description: The timeout period expired.
          schema:
            $ref: '#/definitions/Error'
        410:
          description: The endpoint has gone.
          schema:
            $ref: '#/definitions/Error'
        200:
          description: Pipeline instance is deleted successfully in the group.
        202:
          description: Pipeline instance is deleted partially in the group.
definitions:
  PluginTypesRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
  ResultRetrievePluginTypes:
    type: object
    required:
      - plugin_types
    properties:
      plugin_types:
        type: array
        items:
          type: string
  PipelineTypesRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
  ResultRetrievePipelineTypes:
    type: object
    required:
      - pipeline_types
    properties:
      pipeline_types:
        type: array
        items:
          type: string
  PluginCreationClusterRequest:
    type: object
    required:
      - operation_seq
      - type
      - config
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
      type:
        type: string
        description: One valid type of available plugin types listed in ResultRetrievePluginTypes.
      config:
        type: object
        description: |
          A special configuration object of the plugin type. Check Plugin Reference document for
          more information.
  PluginsRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
      name_pattern:
        type: string
        description: Plugin name filter condition, supports regex expression.
      types:
        type: array
        items:
          type: string
        description: Plugin types filter condition, supports regex expression.
  ResultRetrievePlugins:
    type: object
    required:
      - plugins
    properties:
      plugins:
        type: array
        items:
          $ref: '#/definitions/PluginSpec'
  PluginUpdateClusterRequest:
    type: object
    required:
      - operation_seq
      - type
      - config
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
      type:
        type: string
        description: One valid type of available plugin types listed in ResultRetrievePluginTypes.
      config:
        type: object
        description: |
          A special configuration object of the plugin type. Check Plugin Reference document
          for more information.
  PluginRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
  ResultRetrievePlugin:
    type: object
    required:
      - plugin
    properties:
      plugin:
        $ref: '#/definitions/PluginSpec'
  PluginDeletionClusterRequest:
    type: object
    required:
      - operation_seq
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
  PipelineCreationClusterRequest:
    type: object
    required:
      - operation_seq
      - type
      - config
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
      type:
        type: string
        description: One valid type of available pipeline types listed in ResultRetrievePipelineTypes.
      config:
        type: object
        description: |
          A special configuration object of the pipeline type. Check Pipeline Reference document for
          more information.
  PipelinesRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
      name_pattern:
        type: string
        description: Pipeline name filter condition, supports regex expression.
      types:
        type: array
        items:
          type: string
        description: Pipeline types filter condition, supports regex expression.
  ResultRetrievePipelines:
    type: object
    required:
      - pipelines
    properties:
      pipelines:
        type: array
        items:
          $ref: '#/definitions/PipelineSpec'
  PipelineUpdateClusterRequest:
    type: object
    required:
      - operation_seq
      - type
      - config
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
      type:
        type: string
        description: One valid type of available pipeline types listed in ResultRetrievePipelineTypes.
      config:
        type: object
        description: |
          A special configuration object of the pipeline type. Check Pipeline Reference document
          for more information.
  PipelineRetrieveClusterRequest:
    type: object
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      consistent:
        type: boolean
        default: false
  ResultRetrievePipeline:
    type: object
    required:
      - pipeline
    properties:
      pipeline:
        $ref: '#/definitions/PipelineSpec'
  PipelineDeletionClusterRequest:
    type: object
    required:
      - operation_seq
    properties:
      timeout_sec:
        type: integer
        minimum: 10
        maximum: 65535
        default: 30
      operation_seq:
        type: integer
        minimum: 1
      consistent:
        type: boolean
        default: false
  PluginSpec:
    type: object
    required:
      - type
      - config
    properties:
      type:
        type: string
        description: One valid type of available plugin types listed in ResultRetrievePluginTypes.
      config:
        type: object
        description: |
          A special configuration object of the plugin type. Check Plugin Reference document for
          more information.
  PipelineSpec:
    type: object
    required:
      - type
      - config
    properties:
      type:
        type: string
        description: One valid type of available pipeline types listed in ResultRetrievePipelineTypes.
      config:
        type: object
        description: |
          A special configuration object of the pipeline type. Check Pipeline Reference document
          for more information.
  Error:
    type: object
    required:
      - Error
    properties:
      Error:
        type: string
