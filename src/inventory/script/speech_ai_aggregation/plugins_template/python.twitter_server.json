{
    "type": "Python",
    "config": {
        "plugin_name": "speech.python.twitter_server",
        "code": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIC0qLSBlbmNvZGluZzogdXRmLTggLSotCgonJycKRGVzY3JpcHRpb246CiAgICBUaGlzIHNjcmlwdCBhaW1zIHRvIGNyYXdsIGEgdHdlZXQgYW5kIHJldHJpZXZlIHB1cmUgdGV4dCBhbmQgaW1hZ2UgZnJvbSBpdC4KICAgIFRoZSBjdXJycmVudCBoYXJkIGNvZGUgc2NyZWVuX25hbWUgYXJlIG1lZ2FfZWFzZSBhbmQgQ05OIEJyZWFraW5nIE5ld3MuCiAgICBodHRwczovL3R3aXR0ZXIuY29tL21lZ2FfZWFzZS4KICAgIGh0dHBzOi8vdHdpdHRlci5jb20vY25uYnJrCgpJbnB1dDogTm9uZQpPdXRwdXQ6IHN0ciBpbiBqc29uIGZvcm1hdDoKICAgIHsKICAgICAgICAidGV4dCI6ICJ0d2VldCB0ZXh0IHdoaWNoIGNvdWxkIGJlIGVtcHR5IiwKICAgICAgICAiaW1hZ2VfdXJsIjogInR3ZWV0IGltYWdlIHVybCIsCiAgICAgICAgInVzZXJfbmFtZSI6ICJ0aGVfdHdlZXRfdXNlcl9uYW1lIiwKICAgICAgICAiY3JlYXRlZF9hdCI6ICJGcmkgQXVnIDI1IDE2OjE3OjM1IDIwMTciCiAgICB9CicnJwoKaW1wb3J0IGJhc2U2NAppbXBvcnQganNvbgppbXBvcnQgc3lzCmltcG9ydCB1cmxsaWIucmVxdWVzdAoKaW1wb3J0IHR3ZWVweQpmcm9tIHR3ZWVweSBpbXBvcnQgU3RyZWFtCmZyb20gdHdlZXB5IGltcG9ydCBPQXV0aEhhbmRsZXIKZnJvbSB0d2VlcHkuc3RyZWFtaW5nIGltcG9ydCBTdHJlYW1MaXN0ZW5lcgoKY29uc3VtZXJfa2V5PSdDeHhBMzdmRFhXbE80blRmNTdxdTNRbUk4Jwpjb25zdW1lcl9zZWNyZXQ9J0FEVzNxODJBTVBaMGNSRVVGRnNRSVEyc1BGbkNhQ25aWllqWHFmRFVjcmxJVGFVb3FCJwphY2Nlc3NfdG9rZW5fa2V5PSc4ODg0MjY2MzQyNjg3NDU3MjgtZU80NUhsZmVpdUVUYkdhaTZDejlQYkgxSmhhWXNCeicKYWNjZXNzX3Rva2VuX3NlY3JldD0ndExqdFVTRWxlU2hvaXUwUlByS2xOdW5uWHA0aWpIM3VmbWZqYjNseUtvWk1kJwoKYXV0aCA9IE9BdXRoSGFuZGxlcihjb25zdW1lcl9rZXksIGNvbnN1bWVyX3NlY3JldCkKYXV0aC5zZXRfYWNjZXNzX3Rva2VuKGFjY2Vzc190b2tlbl9rZXksIGFjY2Vzc190b2tlbl9zZWNyZXQpCgphcGkgPSB0d2VlcHkuQVBJKGF1dGgpCgoKY2xhc3MgTXlMaXN0ZW5lcihTdHJlYW1MaXN0ZW5lcik6CiAgICBkZWYgb25fY29ubmVjdChzZWxmKToKICAgICAgICBwcmludCgnb25fY29ubmVjdCcpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgb25fZGlzY29ubmVjdChzZWxmLCBub3RpY2UpOgogICAgICAgIHByaW50KCdvbl9kaXNjb25uZWN0OicsIG5vdGljZSkKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgb25fc3RhdHVzKHNlbGYsIHN0YXR1cyk6CiAgICAgICAgc2VuZF9vdXRfc3RhdHVzKHN0YXR1cykKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBvbl9lcnJvcihzZWxmLCBzdGF0dXNfY29kZSk6CiAgICAgICAgcHJpbnQoJ29uX2Vycm9yOicsIHN0YXR1c19jb2RlKQogICAgICAgIHJldHVybiBUcnVlCgoKZGVmIHdhaXRfbmV3X3R3ZWV0KHVzZXJfaWRzKToKICAgIHN0cmVhbSA9IFN0cmVhbShhdXRoLCBNeUxpc3RlbmVyKCkpCiAgICBzdHJlYW0uZmlsdGVyKGZvbGxvdz11c2VyX2lkcykKCgpkZWYgc2VuZF9vdXRfc3RhdHVzKHN0YXR1cyk6CiAgICBkID0gewogICAgICAgICAgICAndGV4dCc6ICcnLAogICAgICAgICAgICAnaW1hZ2VfdXJsJzogJycsCiAgICAgICAgICAgICd1c2VyX25hbWUnOiAnJywKICAgICAgICAgICAgJ2NyZWF0ZWRfYXQnOiAnJywKICAgIH0KCiAgICBpZiBoYXNhdHRyKHN0YXR1cywgJ3RleHQnKToKICAgICAgICBkWyd0ZXh0J10gPSBzdGF0dXMudGV4dAoKICAgIGlmIGhhc2F0dHIoc3RhdHVzLCAnZW50aXRpZXMnKToKICAgICAgICBlbnRpdGllcyA9IHN0YXR1cy5lbnRpdGllcwogICAgICAgIGlmIGVudGl0aWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBtZWRpYSA9IGVudGl0aWVzLmdldCgnbWVkaWEnKQogICAgICAgICAgICBpZiBtZWRpYSBpcyBub3QgTm9uZSBhbmQgbGVuKG1lZGlhKSA+IDA6CiAgICAgICAgICAgICAgICBpbWFnZV91cmwgPSBtZWRpYVswXS5nZXQoJ21lZGlhX3VybF9odHRwcycpCiAgICAgICAgICAgICAgICBpZiBpbWFnZV91cmwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZFsnaW1hZ2VfdXJsJ10gPSBpbWFnZV91cmwKCiAgICBpZiBoYXNhdHRyKHN0YXR1cywgJ3VzZXInKToKICAgICAgICB1c2VyID0gc3RhdHVzLnVzZXIKICAgICAgICBpZiBoYXNhdHRyKHVzZXIsICduYW1lJyk6CiAgICAgICAgICAgIGRbJ3VzZXJfbmFtZSddID0gdXNlci5uYW1lCgogICAgaWYgaGFzYXR0cihzdGF0dXMsICdjcmVhdGVkX2F0Jyk6CiAgICAgICAgZFsnY3JlYXRlZF9hdCddID0gc3RhdHVzLmNyZWF0ZWRfYXQuc3RyZnRpbWUoJyVjJykKCgogICAgZGF0YSA9IGpzb24uZHVtcHMoZCkuZW5jb2RlKCkKICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfQogICAgcmVxID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9J2h0dHA6Ly8xMjcuMC4wLjE6MTAwODAvdXBsb2FkX3NwZWVjaF90d2VldCcsCiAgICAgICAgICAgIG1ldGhvZD0nUE9TVCcsIGRhdGE9ZGF0YSwgaGVhZGVycz1oZWFkZXJzKQogICAgcHJpbnQoJ3NlbmRpbmcgcmVxOicsIHJlcSkKICAgIHRyeToKICAgICAgICB3aXRoIHVybGxpYi5yZXF1ZXN0LnVybG9wZW4ocmVxKSBhcyBmOgogICAgICAgICAgICBwYXNzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoJ3VybG9wZW4gZmFpbGVkOicsIGUpCgogICAgcHJpbnQoJ3JlY2VpdmVkIHJlc3BvbnNlIHN0YXR1cyBjb2RlOicsIGYuc3RhdHVzKQoKCmRlZiBtYWluKCk6CiAgICB0cnk6CiAgICAgICAgbWVnYV9lYXNlID0gYXBpLmdldF91c2VyKHNjcmVlbl9uYW1lPSdtZWdhX2Vhc2UnKQogICAgICAgIGNubmJyayA9IGFwaS5nZXRfdXNlcihzY3JlZW5fbmFtZT0nY25uYnJrJykKICAgICAgICB1c2VycyA9IFttZWdhX2Vhc2UsIGNubmJya10KCiAgICAgICAgd2FpdF9uZXdfdHdlZXQoW3VzZXIuaWRfc3RyIGZvciB1c2VyIGluIHVzZXJzXSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBlcnJfbXNnID0gJ3B5dGhvbiBzY3JpcHQgaGFuZGxlcyB0d2VldCBpbnB1dCBmYWlsZWQ6IHt9Jy5mb3JtYXQoZSkKICAgICAgICBwcmludChlcnJfbXNnLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgc3lzLmV4aXQoMSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBtYWluKCkK",
        "base64_encoded": true,
        "version": "3",
        "timeout_sec": 0
    }
}
