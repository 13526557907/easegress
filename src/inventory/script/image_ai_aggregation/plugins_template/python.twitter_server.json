{
    "type": "Python",
    "config": {
        "plugin_name": "image.python.twitter_server",
        "code": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIC0qLSBlbmNvZGluZzogdXRmLTggLSotCgonJycKRGVzY3JpcHRpb246CiAgICBUaGlzIHNjcmlwdCBhaW1zIHRvIGNyYXdsIGEgdHdlZXQgYW5kIHJldHJpZXZlIHB1cmUgdGV4dCBhbmQgaW1hZ2UgZnJvbSBpdC4KICAgIFRoZSBjdXJycmVudCBoYXJkIGNvZGUgc2NyZWVuX25hbWUgYXJlIG1lZ2FfZWFzZSBhbmQgQ05OIEJyZWFraW5nIE5ld3MuCiAgICBodHRwczovL3R3aXR0ZXIuY29tL21lZ2FfZWFzZS4KICAgIGh0dHBzOi8vdHdpdHRlci5jb20vY25uYnJrCgpJbnB1dDogTm9uZQpPdXRwdXQ6IHN0ciBpbiBqc29uIGZvcm1hdDoKICAgIHsKICAgICAgICAidGV4dCI6ICJ0d2VldCB0ZXh0IHdoaWNoIGNvdWxkIGJlIGVtcHR5IiwKICAgICAgICAiaW1hZ2VfdXJsIjogInR3ZWV0IGltYWdlIHVybCIsCiAgICAgICAgInVzZXJfbmFtZSI6ICJ0aGVfdHdlZXRfdXNlcl9uYW1lIiwKICAgICAgICAiY3JlYXRlZF9hdCI6ICJGcmkgQXVnIDI1IDE2OjE3OjM1IDIwMTciCiAgICB9CicnJwoKaW1wb3J0IGJhc2U2NAppbXBvcnQganNvbgppbXBvcnQgc3lzCmltcG9ydCB1cmxsaWIucmVxdWVzdAoKaW1wb3J0IHR3ZWVweQpmcm9tIHR3ZWVweSBpbXBvcnQgU3RyZWFtCmZyb20gdHdlZXB5IGltcG9ydCBPQXV0aEhhbmRsZXIKZnJvbSB0d2VlcHkuc3RyZWFtaW5nIGltcG9ydCBTdHJlYW1MaXN0ZW5lcgoKY29uc3VtZXJfa2V5PSdsa0dJTkZjRDdVYlIxU085MTFUSnhVQVVTJwpjb25zdW1lcl9zZWNyZXQ9J2MyU3N5bENydDA2RWFJTVIxVUxQNTE3Q3d1bVlqUWt6bFg1TkZXaGRNUEFvVmpad0hLJwphY2Nlc3NfdG9rZW5fa2V5PSc4ODg0MjY2MzQyNjg3NDU3Mjgtcm1rZlNLRFZLcXdaTGNlVWVOclpYUUtJTXA2VWFVcicKYWNjZXNzX3Rva2VuX3NlY3JldD0nTkQwQzZPaUtlaGdzRzkxYnd6R3pQdEJwSHpmQ3VoTmV5UVJiUGhKd0RjaGNkJwoKYXV0aCA9IE9BdXRoSGFuZGxlcihjb25zdW1lcl9rZXksIGNvbnN1bWVyX3NlY3JldCkKYXV0aC5zZXRfYWNjZXNzX3Rva2VuKGFjY2Vzc190b2tlbl9rZXksIGFjY2Vzc190b2tlbl9zZWNyZXQpCgphcGkgPSB0d2VlcHkuQVBJKGF1dGgpCgoKY2xhc3MgTXlMaXN0ZW5lcihTdHJlYW1MaXN0ZW5lcik6CiAgICBkZWYgb25fY29ubmVjdChzZWxmKToKICAgICAgICBwcmludCgnb25fY29ubmVjdCcpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgb25fZGlzY29ubmVjdChzZWxmLCBub3RpY2UpOgogICAgICAgIHByaW50KCdvbl9kaXNjb25uZWN0OicsIG5vdGljZSkKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgb25fc3RhdHVzKHNlbGYsIHN0YXR1cyk6CiAgICAgICAgc2VuZF9vdXRfc3RhdHVzKHN0YXR1cykKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBvbl9lcnJvcihzZWxmLCBzdGF0dXNfY29kZSk6CiAgICAgICAgcHJpbnQoJ29uX2Vycm9yOicsIHN0YXR1c19jb2RlKQogICAgICAgIHJldHVybiBUcnVlCgoKZGVmIHdhaXRfbmV3X3R3ZWV0KHVzZXJfaWRzKToKICAgIHN0cmVhbSA9IFN0cmVhbShhdXRoLCBNeUxpc3RlbmVyKCkpCiAgICBzdHJlYW0uZmlsdGVyKGZvbGxvdz11c2VyX2lkcykKCgpkZWYgc2VuZF9vdXRfc3RhdHVzKHN0YXR1cyk6CiAgICBkID0gewogICAgICAgICAgICAndGV4dCc6ICcnLAogICAgICAgICAgICAnaW1hZ2VfdXJsJzogJycsCiAgICAgICAgICAgICd1c2VyX25hbWUnOiAnJywKICAgICAgICAgICAgJ2NyZWF0ZWRfYXQnOiAnJywKICAgIH0KCiAgICBpZiBoYXNhdHRyKHN0YXR1cywgJ3RleHQnKToKICAgICAgICBkWyd0ZXh0J10gPSBzdGF0dXMudGV4dAoKICAgIGlmIGhhc2F0dHIoc3RhdHVzLCAnZW50aXRpZXMnKToKICAgICAgICBlbnRpdGllcyA9IHN0YXR1cy5lbnRpdGllcwogICAgICAgIGlmIGVudGl0aWVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBtZWRpYSA9IGVudGl0aWVzLmdldCgnbWVkaWEnKQogICAgICAgICAgICBpZiBtZWRpYSBpcyBub3QgTm9uZSBhbmQgbGVuKG1lZGlhKSA+IDA6CiAgICAgICAgICAgICAgICBpbWFnZV91cmwgPSBtZWRpYVswXS5nZXQoJ21lZGlhX3VybF9odHRwcycpCiAgICAgICAgICAgICAgICBpZiBpbWFnZV91cmwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZFsnaW1hZ2VfdXJsJ10gPSBpbWFnZV91cmwKCiAgICBpZiBoYXNhdHRyKHN0YXR1cywgJ3VzZXInKToKICAgICAgICB1c2VyID0gc3RhdHVzLnVzZXIKICAgICAgICBpZiBoYXNhdHRyKHVzZXIsICduYW1lJyk6CiAgICAgICAgICAgIGRbJ3VzZXJfbmFtZSddID0gdXNlci5uYW1lCgogICAgaWYgaGFzYXR0cihzdGF0dXMsICdjcmVhdGVkX2F0Jyk6CiAgICAgICAgZFsnY3JlYXRlZF9hdCddID0gc3RhdHVzLmNyZWF0ZWRfYXQuc3RyZnRpbWUoJyVjJykKCgogICAgZGF0YSA9IGpzb24uZHVtcHMoZCkuZW5jb2RlKCkKICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfQogICAgcmVxID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9J2h0dHA6Ly8xMjcuMC4wLjE6MTAwODAvdXBsb2FkX2ltYWdlX3R3ZWV0JywKICAgICAgICAgICAgbWV0aG9kPSdQT1NUJywgZGF0YT1kYXRhLCBoZWFkZXJzPWhlYWRlcnMpCiAgICBwcmludCgnc2VuZGluZyByZXE6JywgcmVxKQogICAgdHJ5OgogICAgICAgIHdpdGggdXJsbGliLnJlcXVlc3QudXJsb3BlbihyZXEpIGFzIGY6CiAgICAgICAgICAgIHBhc3MKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludCgndXJsb3BlbiBmYWlsZWQ6JywgZSkKCiAgICBwcmludCgncmVjZWl2ZWQgcmVzcG9uc2Ugc3RhdHVzIGNvZGU6JywgZi5zdGF0dXMpCgoKZGVmIG1haW4oKToKICAgIHRyeToKICAgICAgICBtZWdhX2Vhc2UgPSBhcGkuZ2V0X3VzZXIoc2NyZWVuX25hbWU9J21lZ2FfZWFzZScpCiAgICAgICAgY25uYnJrID0gYXBpLmdldF91c2VyKHNjcmVlbl9uYW1lPSdjbm5icmsnKQogICAgICAgIHVzZXJzID0gW21lZ2FfZWFzZSwgY25uYnJrXQoKICAgICAgICB3YWl0X25ld190d2VldChbdXNlci5pZF9zdHIgZm9yIHVzZXIgaW4gdXNlcnNdKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGVycl9tc2cgPSAncHl0aG9uIHNjcmlwdCBoYW5kbGVzIHR3ZWV0IGlucHV0IGZhaWxlZDoge30nLmZvcm1hdChlKQogICAgICAgIHByaW50KGVycl9tc2csIGZpbGU9c3lzLnN0ZGVycikKICAgICAgICBzeXMuZXhpdCgxKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQo=",
        "base64_encoded": true,
        "version": "3",
        "timeout_sec": 0
    }
}
