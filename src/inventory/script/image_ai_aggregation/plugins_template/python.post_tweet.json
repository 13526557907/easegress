{
    "type": "Python",
    "config": {
        "plugin_name": "image.python.post_tweet",
        "code": "aW1wb3J0IHN5cwppbXBvcnQgYmFzZTY0CmltcG9ydCBqc29uCmltcG9ydCBpbWdoZHIKaW1wb3J0IGlvCmZyb20gcHByaW50IGltcG9ydCBwcHJpbnQKCmltcG9ydCB0d2VlcHkKZnJvbSB0d2VlcHkgaW1wb3J0IFN0cmVhbQpmcm9tIHR3ZWVweSBpbXBvcnQgT0F1dGhIYW5kbGVyCmZyb20gdHdlZXB5LnN0cmVhbWluZyBpbXBvcnQgU3RyZWFtTGlzdGVuZXIKCmNvbnN1bWVyX2tleT0nQ3h4QTM3ZkRYV2xPNG5UZjU3cXUzUW1JOCcKY29uc3VtZXJfc2VjcmV0PSdBRFczcTgyQU1QWjBjUkVVRkZzUUlRMnNQRm5DYUNuWlpZalhxZkRVY3JsSVRhVW9xQicKYWNjZXNzX3Rva2VuX2tleT0nODg4NDI2NjM0MjY4NzQ1NzI4LWVPNDVIbGZlaXVFVGJHYWk2Q3o5UGJIMUpoYVlzQnonCmFjY2Vzc190b2tlbl9zZWNyZXQ9J3RManRVU0VsZVNob2l1MFJQcktsTnVublhwNGlqSDN1Zm1mamIzbHlLb1pNZCcKCmF1dGggPSBPQXV0aEhhbmRsZXIoY29uc3VtZXJfa2V5LCBjb25zdW1lcl9zZWNyZXQpCmF1dGguc2V0X2FjY2Vzc190b2tlbihhY2Nlc3NfdG9rZW5fa2V5LCBhY2Nlc3NfdG9rZW5fc2VjcmV0KQoKYXBpID0gdHdlZXB5LkFQSShhdXRoKQoKCmRlZiByZWFkX2pzb24oKToKICAgIGQgPSBqc29uLmxvYWRzKHN5cy5zdGRpbi5yZWFkKCkpCiAgICByZXR1cm4gZC5nZXQoJ3RleHQnKSwgZC5nZXQoJ2ltYWdlJykKCgpkZWYgcG9zdF90d2VldCh0ZXh0LCBpbWFnZSk6CiAgICBpZiB0ZXh0IGlzIG5vdCBOb25lIGFuZCBsZW4odGV4dCkgPiAxNDA6CiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJ0ZXh0IGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gMTQwIGNoYXJhY3RlcnMiKQoKICAgIGlmIGltYWdlIGlzIE5vbmU6CiAgICAgICAgYXBpLnVwZGF0ZV9zdGF0dXMoc3RhdHVzPXRleHQpCiAgICBlbHNlOgogICAgICAgIGltZyA9IGJhc2U2NC5iNjRkZWNvZGUoaW1hZ2UpCiAgICAgICAgaW1nX3R5cGUgPSBpbWdoZHIud2hhdChOb25lLCBpbWcpCgogICAgICAgIGlmIGltZ190eXBlIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiYmFkIHBob3RvIGZvcm1hdCIpCgoJI3ByaW50KCJ0eXBlOiB7fSIuZm9ybWF0KGltZ190eXBlKSkKICAgICAgICB3aXRoIGlvLkJ5dGVzSU8oaW1nKSBhcyBmcDoKICAgICAgICAgICAgYXBpLnVwZGF0ZV93aXRoX21lZGlhKGZpbGVuYW1lPSd4LicraW1nX3R5cGUsIHN0YXR1cz10ZXh0LCBmaWxlPWZwKQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICB0cnk6CiAgICAgICAgdGV4dCwgaW1hZ2UgPSByZWFkX2pzb24oKQogICAgICAgIGlmIHRleHQgaXMgTm9uZSBhbmQgaW1hZ2UgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd0ZXh0L2ltYWdlIGFyZSBhbGwgZW1wdHkgaW4gaW5wdXQganNvbicpCiAgICAgICAgcG9zdF90d2VldCh0ZXh0LCBpbWFnZSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBlcnJfbXNnID0gJ3B5dGhvbiBzY3JpcHQgaGFuZGxlcyB0d2VldCBpbnB1dCBmYWlsZWQ6IHt9Jy5mb3JtYXQoZSkKICAgICAgICBwcmludChlLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgc3lzLmV4aXQoMSk=",
        "base64_encoded": true,
        "version": "3",
        "timeout_sec": 20,
        "input_buffer_pattern": "\\{ \"image\": \"{BASE64_COL_IMG}\", \"text\": \"{TWEET_ZH_TXT}\" \\}"
    }
}
