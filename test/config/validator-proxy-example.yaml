name: validator-proxy-example
kind: HTTPProxy
# By order: validator, fallback, rateLimiter, requestAdaptor, backend, responseAdaptor
backend:
  mainPool:
    servers:
    - url: http://127.0.0.1:9098
    loadBalance:
      policy: roundRobin
  compression:
    minLength: 1024
validator:
  headers:
    IsValid:
      regexp: "^yes$"
  jwt:
    # If this option is set and the cookie exists, its value is used as the token string,
    # otherwise, the Authorization header is used.
    cookieName: auth
    algorithm: HS256
    secret: 6d79736563726574 # mysecret in hex
  signature:
    accessKeys:
      AKID: SECRET
    excludeBody: false
  oauth2:
    tokenIntrospect:
      endPoint: https://127.0.0.1:8443/auth/realms/test/protocol/openid-connect/token/introspect
      clientId: easegress
      clientSecret: 42620d18-871d-465f-912a-ebcef17ecb82
      insecureTls: false
