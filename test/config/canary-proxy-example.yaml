name: canary-proxy-example
kind: HTTPProxy
# By order: validator, fallback, rateLimiter, requestAdaptor, backend, responseAdaptor
backend:
  candidatePool:
    loadBalance:
      policy: "roundRobin"
    filter:
      probability:
        perMill: 100
        policy: "random"
    servers:
    - url: http://127.0.0.1:9099
      weight: 5
  mainPool:
    servers:
    - url: http://127.0.0.1:9098
      weight: 5
    loadBalance:
      policy: roundRobin
